syntax = "proto3";

package notification;
option go_package = "./notification";

// 通知消息
message Notification {
  string id = 1;
  string user_id = 2;
  string title = 3;
  string content = 4;
  string type = 5; // 消息类型：info, warning, error等
  bool is_read = 6;
  string created_at = 7;
  string read_at = 8;
}

// 发送通知请求
message SendNotificationRequest {
  string user_id = 1;
  string title = 2;
  string content = 3;
  string type = 4;
}

// 发送通知响应
message SendNotificationResponse {
  bool success = 1;
  string message = 2;
  Notification notification = 3;
}

// 获取用户通知请求
message GetUserNotificationsRequest {
  string user_id = 1;
  bool include_read = 2;
  int32 page = 3;
  int32 limit = 4;
}

// 获取用户通知响应
message GetUserNotificationsResponse {
  bool success = 1;
  string message = 2;
  repeated Notification notifications = 3;
  int32 total = 4;
}

// 标记为已读请求
message MarkAsReadRequest {
  string notification_id = 1;
  string user_id = 2;
}

// 标记为已读响应
message MarkAsReadResponse {
  bool success = 1;
  string message = 2;
}

// 删除通知请求
message DeleteNotificationRequest {
  string notification_id = 1;
  string user_id = 2;
}

// 删除通知响应
message DeleteNotificationResponse {
  bool success = 1;
  string message = 2;
}

// 通知服务
service NotificationService {
  // 发送通知
  rpc SendNotification(SendNotificationRequest) returns (SendNotificationResponse);
  
  // 获取用户通知
  rpc GetUserNotifications(GetUserNotificationsRequest) returns (GetUserNotificationsResponse);
  
  // 标记为已读
  rpc MarkAsRead(MarkAsReadRequest) returns (MarkAsReadResponse);
  
  // 删除通知
  rpc DeleteNotification(DeleteNotificationRequest) returns (DeleteNotificationResponse);
}